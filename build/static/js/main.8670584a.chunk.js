(this["webpackJsonpwhisperas-client"]=this["webpackJsonpwhisperas-client"]||[]).push([[0],{107:function(e,t,a){e.exports=a.p+"static/media/cal.38c722c0.svg"},108:function(e,t,a){e.exports=a.p+"static/media/trends.88d8ee14.svg"},109:function(e,t,a){e.exports=a.p+"static/media/user.cdf57ebd.svg"},110:function(e,t,a){e.exports=a.p+"static/media/link.4b7cfc01.svg"},147:function(e,t,a){e.exports=a(288)},152:function(e,t,a){},153:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),c=a.n(s),l=(a(152),a(2)),o=a(18),i=a(35),m=(a(153),{h1:{textAlign:"center",fontSize:"40px",fontFamily:"Metropolis, sans-serif",margin:0},h2:{textAlign:"center",fontSize:"30px",fontFamily:"Metropolis, sans-serif"},p:{textAlign:"center",fontSize:"24px",fontFamily:"Inter var, sans-serif",margin:"0 5vw"},p2:{textAlign:"center",fontSize:"24px",fontFamily:"Inter var, sans-serif",margin:"20px 5vw"}});function u(){return r.a.createElement("div",null,r.a.createElement("h1",{style:m.h1},"Whisperas: The Pancreas Whisperer"),r.a.createElement("h2",{style:m.h2},"Discover trends in your daily diabetes health"),r.a.createElement("p",{style:m.p},"Whisperas is a portable web app designed for your mobile device.",r.a.createElement("br",null),"Please go to https://whisperas.com on your phone to experience The Pancreas Whisperer."),r.a.createElement("p",{style:m.p2},"A desktop client is in development!"))}var d=a(98);function p(e){var t=e.index,s=Object(i.g)().pathname,c=Object(n.useState)("plus"),m=Object(l.a)(c,2),u=m[0],p=m[1],h={top:"".concat(window.innerHeight-50,"px")};Object(n.useEffect)((function(){"/entry"!==s?p("plus"):t<=4?p("fwd"):5===t&&p("check")}),[s,t]);return r.a.createElement("div",{className:"NavBar",style:h},r.a.createElement(o.b,{to:"/history"},r.a.createElement("img",{src:a(107),className:"navIcn",alt:"View History"})),r.a.createElement(o.b,{to:"/trends"},r.a.createElement("img",{src:a(108),className:"navIcn",alt:"View Trends"})),"/entry"!==s&&r.a.createElement(o.b,{to:"/entry"},r.a.createElement("div",{className:"navBtn addBtn"},r.a.createElement(d.MorphIcon,{type:u,size:75,thickness:5,color:"#ffffff"}))),"/entry"===s&&r.a.createElement("button",{className:"navBtn addBtn",onClick:function(){t<5&&e.setIndex(t+1)}},r.a.createElement(d.MorphIcon,{type:u,size:75,thickness:5,color:"#ffffff"})),r.a.createElement(o.b,{to:"/user"},r.a.createElement("img",{src:a(109),className:"navIcn",alt:"View User"})),r.a.createElement(o.b,{to:"/resources"},r.a.createElement("img",{src:a(110),className:"navIcn",alt:"Resources"})))}a(51);var h=a(9),f=a(15),E=a.n(f),g=(a(289),a(139)),b=(a(80),a(10)),v={1:{src:a(57),alt:"Bad"},2:{src:a(58),alt:"So so"},3:{src:a(59),alt:"Normal"},4:{src:a(60),alt:"Good"},5:{src:a(61),alt:"Great"}};function y(e){return null===e.scr?r.a.createElement("div",{className:"scrTile histMiniCont"}):r.a.createElement("div",{className:"scrTile histMiniCont"},r.a.createElement("h3",{className:"histMiniHeader"},"health"===e.type?"Health:":"General:"),r.a.createElement("img",{src:v["".concat(e.scr)].src,alt:v["".concat(e.scr)].alt,className:"histMoji"}))}function N(e){return r.a.createElement("div",{className:"histMiniCont "+(!0===e.trends&&"trendTile"),style:e.data.length<1?{display:"flex",alignItems:"center"}:{}},r.a.createElement("h3",{className:"histMiniHeader"},e.title),r.a.createElement("ul",{className:"histList"},e.data))}var w={1:{location:a(57),alt:"Bad"},2:{location:a(58),alt:"So so"},3:{location:a(59),alt:"Normal"},4:{location:a(60),alt:"Good"},5:{location:a(61),alt:"Great"}},k=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function j(e){var t=e.data,a=Object(n.useState)(!1),s=Object(l.a)(a,2),c=s[0],o=s[1],i=window.matchMedia("(max-width: 370px)").matches,m=function(e){e.stopPropagation()},u=t.wins.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-1")},e)})),d=t.setbacks.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-2")},e)})),p=t.treatChanges.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-3")},e)}));return r.a.createElement("div",{className:"HistoryTile",onClick:function(){return o(!c)}},r.a.createElement("div",{className:"histTileUpper"},r.a.createElement("h2",{className:"histDate"},c?"".concat(S[t.day],", ").concat(t.month,"/").concat(t.date):i?"".concat(t.month,"/").concat(t.date):"".concat(k[t.day],", ").concat(t.month,"/").concat(t.date)),r.a.createElement("div",{className:"histCounts",style:c?{display:"none"}:{}},r.a.createElement("p",{className:"p"},"Wins: ".concat(t.wins.length)),r.a.createElement("p",{className:"p"},"Setbacks: ".concat(t.setbacks.length)),r.a.createElement("p",{className:"p"},"Treatment Changes: ".concat(t.treatChanges.length))),r.a.createElement("img",{src:w["".concat(t.genScore)].location,alt:w["".concat(t.genScore)].alt,className:"histMoji",style:c?{display:"none"}:{}}),r.a.createElement("div",{style:c?{fontSize:"20px"}:{display:"none"}},r.a.createElement(g.a,{title:"Are you sure you want to delete this?",onConfirm:function(){return function(){var a=localStorage.getItem("token");E.a.post("https://whisperas.appspot.com/api/journal/delete/".concat(t._id),{},{headers:{Authorization:"JWT ".concat(a)}}).then((function(t){t.data.success?(h.a.success(t.data.message),localStorage.setItem("entries",JSON.stringify(t.data.entries)),e.reload(!0)):h.a.error(t.data.message)}))}()},onCancel:function(e){return m(e)},placement:"leftTop",okText:"Yes",okType:"danger"},r.a.createElement("button",{onClick:function(e){return m(e)},style:{backgroundColor:"transparent",border:"none"}},r.a.createElement(b.a,{type:"delete"}))))),r.a.createElement("div",{className:"histTileLower",style:c?{}:{display:"none"}},r.a.createElement("div",{className:"scrCont"},r.a.createElement(y,{type:"health",scr:t.healthScore}),r.a.createElement(y,{type:"gen",scr:t.genScore})),r.a.createElement(N,{data:u,title:"Wins"}),r.a.createElement(N,{data:d,title:"Setbacks"}),r.a.createElement(N,{data:p,title:"Treatment Changes"}),r.a.createElement("div",{className:"histMiniCont",style:t.comment.length<1?{display:"flex",alignItems:"center"}:{}},r.a.createElement("h3",{className:"histMiniHeader"},"Comment"),r.a.createElement("p",{className:"commentP"},t.comment))))}function O(){var e=localStorage.getItem("token"),t=Object(n.useState)([]),a=Object(l.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],g=p[1];Object(n.useEffect)((function(){null!==e?E.a.get("https://whisperas.appspot.com/api/journal/my-entries",{headers:{Authorization:"JWT ".concat(e)}}).then((function(e){e.data.success?(localStorage.setItem("entries",JSON.stringify(e.data.entries)),c(e.data.entries)):h.a.error(e.data.message),g(!0)})):h.a.error("Please log in to continue!")}),[c,e]),Object(n.useEffect)((function(){!0===m&&(c(JSON.parse(localStorage.getItem("entries"))),u(!1))}),[m,u,c]),Object(n.useEffect)((function(){f&&0===s.length&&h.a.warning("Hit the big plus button to make an entry!")}),[f,s]);var b=s.map((function(e){return r.a.createElement(j,{data:e,key:e._id,reload:u})}));return r.a.createElement("div",{className:"mainPage History"},r.a.createElement("h1",null,"History"),r.a.createElement("div",{className:"histScrollCont"},b))}var C=a(142),T=a.n(C);function F(e){return r.a.createElement("div",{onClick:e.click},r.a.createElement("img",{src:e.src,className:"Emoji "+(e.selected?"Emoji_selected":""),alt:e.text}))}function x(e){var t=e.res,s=e.setInval,c=Object(n.useState)(""),o=Object(l.a)(c,2),i=o[0],m=o[1];return Object(n.useEffect)((function(){switch(s(!1),t){case 1:m("B-A-D!");break;case 2:m("So So. Could have been better.");break;case 3:m("Fine, no complaints.");break;case 4:m("Good!");break;case 5:m("Stupendous!!");break;default:m("")}}),[t,m,s]),r.a.createElement("div",{className:"entryCard",style:e.invalid?{borderColor:"#fea39e"}:{}},r.a.createElement("h2",{className:"entryHeader"},"How has your day been, ",e.user,"?"),r.a.createElement("p",{className:"reqNote"},"Required"),r.a.createElement("p",{className:"entryCardMsg"},i),r.a.createElement("div",{className:"emojiContainer"},r.a.createElement(F,{src:a(57),text:"Bad (1)",selected:1===t,click:function(){return e.setRes(1)}}),r.a.createElement(F,{src:a(58),text:"So So (2)",selected:2===t,click:function(){return e.setRes(2)}}),r.a.createElement(F,{src:a(59),text:"Normal (3)",selected:3===t,click:function(){return e.setRes(3)}}),r.a.createElement(F,{src:a(60),text:"Good (4)",selected:4===t,click:function(){return e.setRes(4)}}),r.a.createElement(F,{src:a(61),text:"Great (5)",selected:5===t,click:function(){return e.setRes(5)}})))}function P(e){var t=e.genScore,s=e.res,c=e.setInval,o=Object(n.useState)(""),i=Object(l.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(l.a)(d,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){switch(t){case 1:case 2:u("Bummer! Hopefully tomorrow is better.\n\nHow did everything go health-wise?");break;case 3:u("Cool, cool. How would you rate your health today?");break;case 4:case 5:u("Awesome! How would you rate your health today?");break;default:u("How would you rate your health today?")}}),[t,u]),Object(n.useEffect)((function(){switch(c(!1),s){case 1:f("Total roller coaster from start to finish. Awful!");break;case 2:f("Today was difficult.\nMore lows and highs than normal.");break;case 3:f("Fine, no issues to report \ud83d\udc4d");break;case 4:f("Sugars have been pretty decent.\nI feel good!");break;case 5:f("Sugars are in great shape!\nI feel awesome!!");break;default:f("")}}),[s,f,c]),r.a.createElement("div",{className:"entryCard",style:e.invalid?{borderColor:"#fea39e"}:{}},r.a.createElement("h2",{className:"entryHeader"},m),r.a.createElement("p",{className:"reqNote"},"Required"),r.a.createElement("p",{className:"entryCardMsg"},h),r.a.createElement("div",{className:"emojiContainer"},r.a.createElement(F,{src:a(57),text:"Bad (1)",selected:1===e.res,click:function(){return e.setRes(1)}}),r.a.createElement(F,{src:a(58),text:"So So (2)",selected:2===e.res,click:function(){return e.setRes(2)}}),r.a.createElement(F,{src:a(59),text:"Normal (3)",selected:3===e.res,click:function(){return e.setRes(3)}}),r.a.createElement(F,{src:a(60),text:"Good (4)",selected:4===e.res,click:function(){return e.setRes(4)}}),r.a.createElement(F,{src:a(61),text:"Great (5)",selected:5===e.res,click:function(){return e.setRes(5)}})))}a(281);var I=a(144),W=a(145);a(283);function B(e){var t=e.opts,a=Object(n.useState)(""),s=Object(l.a)(a,2),c=s[0],o=s[1];return r.a.createElement("div",{className:"Checklist"},r.a.createElement(I.a.Group,{options:t,onChange:function(t){e.setChecked(t)},className:"thomasCheckGroup"}),r.a.createElement("div",{className:"customCheckCont"},r.a.createElement(b.a,{type:"plus-circle",style:{fontSize:"18px",color:"#e6e6e6",marginLeft:"-1px"},theme:""===c?"outlined":"twoTone",onClick:function(){return function(){if(c.length>0){var a=[].concat(Object(W.a)(t),[c]);o(""),e.setOpts(a)}}()}}),r.a.createElement("input",{type:"text",className:"customCheckInput",onChange:function(e){return o(e.target.value)},value:c})))}function R(e){var t=Object(n.useState)(["No (or few) lows","No (or few) highs","Well-timed boluses","Satisfied with my meals","Quality sleep last night","20 minute exercise"]),a=Object(l.a)(t,2),s=a[0],c=a[1];return r.a.createElement("div",{className:"entryCard checkCard"},r.a.createElement("h2",{className:"entryHeader"},"Today's Wins"),r.a.createElement(B,{opts:s,setChecked:function(t){e.setRes(t)},setOpts:c}))}function H(e){var t=Object(n.useState)(["Too many lows","Too many highs","Wonky boluses","Dissatisfaction with my diet","Poor quality sleep","No exercise"]),a=Object(l.a)(t,2),s=a[0],c=a[1];return r.a.createElement("div",{className:"entryCard checkCard"},r.a.createElement("h2",{className:"entryHeader"},"Today's Setbacks"),r.a.createElement(B,{opts:s,setChecked:function(t){e.setRes(t)},setOpts:c}))}function M(e){var t=Object(n.useState)(["Increase basal rate","Decrease basal rate","Increase carb ratio","Decrease carb ratio","Dietary change","Physical activity change"]),a=Object(l.a)(t,2),s=a[0],c=a[1];return r.a.createElement("div",{className:"entryCard checkCard"},r.a.createElement("h2",{className:"entryHeader"},"Treatment Changes"),r.a.createElement(B,{opts:s,setChecked:function(t){e.setRes(t)},setOpts:c}))}a(284);var q=a(143);function G(e){var t=e.res.length;return r.a.createElement("div",{className:"entryCard"},r.a.createElement("h2",{className:"entryHeader"},"Comments"),r.a.createElement("p",{className:"entryCardSub"},"Enter an optional, tweet-like thought!"),r.a.createElement("textarea",{maxLength:"140",id:"entryTextArea",onChange:function(t){return e.setRes(t.target.value)},placeholder:"Max 140 chars."}),r.a.createElement(q.a,{percent:Math.round(t/140*100),size:"small",showInfo:!1}))}function A(e){var t=localStorage.getItem("prefname"),a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],o=s[1],m=Object(n.useState)(""),u=Object(l.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)([]),g=Object(l.a)(f,2),b=g[0],v=g[1],y=Object(n.useState)(null),N=Object(l.a)(y,2),w=N[0],k=N[1],S=Object(n.useState)(!1),j=Object(l.a)(S,2),O=j[0],C=j[1],F=Object(n.useState)(!1),I=Object(l.a)(F,2),W=I[0],B=I[1],q=Object(n.useState)(!1),A=Object(l.a)(q,2),U=A[0],D=A[1],L=Object(n.useState)(null),z=Object(l.a)(L,2),_=z[0],J=z[1],Y=Object(n.useState)([]),V=Object(l.a)(Y,2),Q=V[0],$=V[1],K=function(t){e.setIndex(t)},X=function(){o([]),p([]),v([]),k([]),C(!1),B(!1),J(null),$([]),K(0),D(!0)},Z=function(){null===w&&null===_?(h.a.warning("Woops! The first 2 questions cannot be left blank :)"),C(!0),B(!0),K(0)):null===w?(h.a.warning("Please answer the first question :)"),C(!0),K(0)):null===_?(alert("Please answer the second question :)"),h.a.warning("Please answer the second question :)"),B(!0),K(1)):function(){var e=localStorage.getItem("token"),t=new Date,a=t.getDate(),n=t.getMonth()+1,r=t.getFullYear(),s=t.getDay();null!==e?E.a.post("https://whisperas.appspot.com/api/journal/submit",{dmy:"".concat(a,"-").concat(n,"-").concat(r),date:a,month:n,year:r,day:s,genScore:w,healthScore:_,wins:c,setbacks:b,treatChanges:Q,comment:d},{headers:{Authorization:"JWT ".concat(e)}}).then((function(e){e.data.success||1===e.data.code?(h.a.success(e.data.message),X()):(h.a.error(e.data.message),K(0))})):(h.a.error("Please login to continue!"),X())}()};return U?r.a.createElement(i.a,{push:!0,to:"/"}):r.a.createElement("div",{className:"mainPage EntryPage"},r.a.createElement("div",{className:"entryForm"},r.a.createElement(T.a,{enableMouseEvents:!0,index:e.index,onChangeIndex:K},r.a.createElement(x,{res:w,setRes:k,user:t,invalid:O,setInval:C}),r.a.createElement(P,{res:_,setRes:J,genScore:w,invalid:W,setInval:B}),r.a.createElement(R,{res:c,setRes:o}),r.a.createElement(H,{res:b,setRes:v}),r.a.createElement(M,{res:Q,setRes:$}),r.a.createElement(G,{res:d,setRes:p}))),r.a.createElement("div",{id:"hiddenBtn",style:5===e.index?{display:"block"}:{},onClick:function(){return Z()}}))}function U(){return r.a.createElement("div",{className:"mainPage Resources"},r.a.createElement("h1",null,"Resources"),r.a.createElement("p",{className:"resourceMsg"},"These are some of my favorite resources for diabetes info and support."),r.a.createElement("div",{className:"rscList"},r.a.createElement("div",{className:"prefsTile"},r.a.createElement("a",{rel:"noopener noreferrer",href:"https://cheapinsulin.org/",target:"_blank"},r.a.createElement("p",{className:"bubbleTitle rscTitle"},"Cheap Insulin Foundation"),r.a.createElement("p",{className:"rscSubTitle"},"cheapinsulin.org"))),r.a.createElement("div",{className:"prefsTile"},r.a.createElement("a",{rel:"noopener noreferrer",href:"https://www.nightscoutfoundation.org/",target:"_blank"},r.a.createElement("p",{className:"bubbleTitle rscTitle"},"The Nightscout Foundation"),r.a.createElement("p",{className:"rscSubTitle"},"nightscoutfoundation.org"))),r.a.createElement("div",{className:"prefsTile"},r.a.createElement("a",{rel:"noopener noreferrer",href:"https://healthfinder.gov/FindServices/SearchContext.aspx?topic=2661",target:"_blank"},r.a.createElement("p",{className:"bubbleTitle rscTitle"},"HealthFinder.gov"),r.a.createElement("p",{className:"rscSubTitle"},"healthfinder.gov"))),r.a.createElement("div",{className:"prefsTile"},r.a.createElement("a",{rel:"noopener noreferrer",href:"https://clinicaltrials.gov/",target:"_blank"},r.a.createElement("p",{className:"bubbleTitle rscTitle"},"ClinicalTrials.gov"),r.a.createElement("p",{className:"rscSubTitle"},"clinicaltrials.gov"))),r.a.createElement("div",{className:"prefsTile"},r.a.createElement("a",{rel:"noopener noreferrer",href:"https://diatribe.org/",target:"_blank"},r.a.createElement("p",{className:"bubbleTitle rscTitle"},"diaTribe Foundation"),r.a.createElement("p",{className:"rscSubTitle"},"diatribe.org")))))}var D={backgroundColor:"#abe8c2",borderColor:"#32e875"};function L(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:e.active?D:{},className:"PeriodBtn",onClick:e.click},e.text))}a(134);var z=a(71);function _(){z.a.info({title:"Trend Calculations",centered:!0,maskClosable:!0,maskStyle:{backgroundColor:"rgba(0,0,0,.7)"},content:r.a.createElement("div",{className:"Modal"},r.a.createElement("p",null,'The selected time period indicates how many recent entries to included in the calculations. For example, selecting "7 Days" will base trend calculations on the 7 most-recent entries.'),r.a.createElement("p",null,"When making an entry, each of the 5 emojis correlates to a  value (or score) between 1 & 5. The Health and General emojis below represent the average scores during the chosen period of time."),r.a.createElement("p",null,"The items listed under Wins, Setbacks, and Treatment Changes are determined by your most frequent selections. All options sharing the same high frequency are listed."),r.a.createElement("p",null,"Best and Worst days are determined by calculating your average entered score for each day of the week, then finding the highest and lowest scoring days.")),onOk:function(){}})}function J(){var e=localStorage.getItem("token"),t=Object(n.useState)([]),a=Object(l.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(null),i=Object(l.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)([]),p=Object(l.a)(d,2),f=p[0],g=p[1],v=Object(n.useState)(!1),w=Object(l.a)(v,2),k=w[0],S=w[1],j=Object(n.useState)([]),O=Object(l.a)(j,2),C=O[0],T=O[1],F=Object(n.useState)([]),x=Object(l.a)(F,2),P=x[0],I=x[1],W=Object(n.useState)(null),B=Object(l.a)(W,2),R=B[0],H=B[1],M=Object(n.useState)(null),q=Object(l.a)(M,2),G=q[0],A=q[1],U=Object(n.useState)([]),D=Object(l.a)(U,2),z=D[0],J=D[1],Y=Object(n.useState)([]),V=Object(l.a)(Y,2),Q=V[0],$=V[1],K=Object(n.useState)(null),X=Object(l.a)(K,2),Z=X[0],ee=X[1];Object(n.useEffect)((function(){null!==e?E.a.get("https://whisperas.appspot.com/api/journal/my-entries",{headers:{Authorization:"JWT ".concat(e)}}).then((function(e){e.data.success?(localStorage.setItem("entries",JSON.stringify(e.data.entries)),c(e.data.entries)):h.a.error(e.data.message),S(!0)})):h.a.error("Please log in to continue!")}),[c,e]),Object(n.useEffect)((function(){k&&s.length>=7?u(7):k&&u("all")}),[s,k,u]),Object(n.useEffect)((function(){k&&(s.length<m||0===s.length)?A(!0):k&&A(!1)}),[s,m,k,A]),Object(n.useEffect)((function(){k&&0===s.length&&h.a.warning("Hit the big plus button to make an entry!")}),[k,s]);var te=function(e,t,a){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);a(Math.round(n.reduce((function(e,t){return e+t}))/e.length))},ae=function(e,t,a){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);for(var s=n.flat(),c={},l=1,o=[],i=0;i<s.length;i++){var m=s[i];null==c[m]?c[m]=1:c[m]++,c[m]>l?(o=[m],l=c[m]):c[m]===l&&(o.push(m),l=c[m])}a(o)},ne=Object(n.useCallback)((function(e,t,a){for(var n=[[],[],[],[],[],[],[]],r=0;r<e.length;r++){var s=e[r].genScore+e[r].healthScore;n[e[r].day].push(s)}var c=function(e){for(var t=[],a=0;a<e.length;a++)e[a].length>0?t.push(e[a].reduce((function(e,t){return e+t}))/e[a].length):t.push(null);return t}(n),l=function(e){for(var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=0,n=[],r=0;r<e.length;r++)e[r]>a?(a=e[r],n=[t[r]]):e[r]===a&&n.push(t[r]);return n}(c),o=function(e){for(var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=8,n=[],r=0;r<e.length;r++)null!==e[r]&&e[r]<a?(a=e[r],n=[t[r]]):e[r]===a&&n.push(t[r]);return n}(c);!function(e,t){for(var a=!0,n=0;n<7&&!0===a;)e[n]!==t[n]?a=!1:n++;return a}(l,o)?(t(l),a(o)):(t(["Not enough data"]),a(["Not enough data"]))}),[]);Object(n.useEffect)((function(){if(!1===G){var e="all"===m?s.length:m,t=s.slice(0,e);te(t,"genScore",H),te(t,"healthScore",ee),ae(t,"wins",T),ae(t,"setbacks",$),ae(t,"treatChanges",J),ne(t,g,I)}}),[k,G,s,m,ne]);var re=C.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-11")},e)})),se=Q.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-12")},e)})),ce=z.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-13")},e)})),le=f.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-14")},e)})),oe=P.map((function(e){return r.a.createElement("li",{key:"".concat(e,"-15")},e)}));return r.a.createElement("div",{className:"mainPage Trends"},r.a.createElement("div",{className:"trendHeaderCont"},r.a.createElement("h1",{className:"trendHeader"},"Trends"),r.a.createElement("button",{className:"infoBtn",onClick:_},r.a.createElement(b.a,{type:"info-circle",style:{fontSize:"18px"}}))),r.a.createElement("div",{className:"periodBtns"},r.a.createElement(L,{active:"all"===m,click:function(){return u("all")},text:"All Time"}),r.a.createElement(L,{active:7===m,click:function(){return u(7)},text:"7 Days"}),r.a.createElement(L,{active:30===m,click:function(){return u(30)},text:"30 Days"}),r.a.createElement(L,{active:365===m,click:function(){return u(365)},text:"1 Year"})),r.a.createElement("div",{className:"trendsScrollCont"},r.a.createElement("div",{className:"scrCont",style:G||!k?{display:"none"}:{}},r.a.createElement(y,{type:"health",scr:Z}),r.a.createElement(y,{type:"gen",scr:R})),r.a.createElement("div",{className:"modeTiles",style:G||!k?{display:"none"}:{}},r.a.createElement(N,{data:re,title:"Wins",trends:!0}),r.a.createElement(N,{data:se,title:"Setbacks",trends:!0}),r.a.createElement(N,{data:ce,title:"Treatment Changes",trends:!0}),r.a.createElement(N,{data:le,title:"Best Days",trends:!0}),r.a.createElement(N,{data:oe,title:"Worst Days",trends:!0})),r.a.createElement("div",{className:"trendMsgCont",style:G&&k?{}:{display:"none"}},r.a.createElement("p",{className:"trendMsg"},"Insufficient data for this time period."))))}function Y(){z.a.info({title:"Privacy Info",maskClosable:!0,maskStyle:{backgroundColor:"rgba(0,0,0,.7)"},centered:!0,content:r.a.createElement("div",{className:"Modal"},r.a.createElement("p",null,"Cadence has been optimized for anonymity and privacy. This app does not use any fingerprinting, analytics, or personal identification techniques."),r.a.createElement("p",null,"All user and app data is stored in an encrypted database, passwords are never saved in plain-text form, and all communictions are over a secure TLS connection."),r.a.createElement("p",null,"An email address is not requested, required, demanded, nor desired to use this tool. Accounts are identified by their unique usernames."),r.a.createElement("p",null,"The 'Preferred Name' associated with your account is used to informally greet you in the app. If you have any qualms about your name or nickname being saved, please use a fictitous name (ex: LukeSkywalker, BuzzLightyear95, your_mom)."),r.a.createElement("p",null,"I will never ever ever ever bother you with any promotions, newsletters, etc. If the stars fall from the heavens and hell freezes over, an unobtrusive in-app message will be given with any urgent notices.")),onOk:function(){}})}function V(){return r.a.createElement("div",{className:"prefsFoot"},r.a.createElement("div",null,r.a.createElement("a",{className:"prefsLink",href:"https://github.com/tggir1/cadence",rel:"noopener noreferrer",target:"_blank"},"View source code on GitHub")),r.a.createElement("div",null,r.a.createElement("a",{className:"prefsLink",href:"mailto:thomas@thomasg.dev",rel:"noopener noreferrer",target:"_blank"},"Contact me")),r.a.createElement("div",{className:"prefsLink",onClick:Y},"Privacy Info"))}function Q(e){var t=window.matchMedia("(min-height:".concat(window.height-30,"px")).matches;return r.a.createElement("div",{className:"userFormArea"},r.a.createElement("form",{className:"userForm"},r.a.createElement("div",{className:"userFormGroup"},r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("input",{type:"text",id:"username",className:"userField",placeholder:"harryman19",autoComplete:"username",onChange:function(t){return e.setUsername(t.target.value)},required:!0})),r.a.createElement("div",{className:"userFormGroup"},r.a.createElement("label",{htmlFor:"pass"},"Password:"),r.a.createElement("input",{type:"password",id:"pass",className:"userField",autoComplete:"password",onChange:function(t){return e.setPass(t.target.value)},required:!0})),r.a.createElement("div",{className:"userFormBtnWrap"},r.a.createElement("button",{onClick:function(t){return e.btn(t)},className:"userFormBtn"},"Login"))),r.a.createElement("div",{className:"footWrapUser",style:t?{display:"none"}:{}},r.a.createElement("p",{className:"formSwitch",onClick:function(){return e.setForm("register")}},"New user? Click here to register!"),r.a.createElement(V,null)))}a(135);var $=a(25);function K(e){return r.a.createElement("div",{className:"userFormArea"},r.a.createElement("form",{className:"userForm"},r.a.createElement("div",{className:"userFormGroup"},r.a.createElement("label",{htmlFor:"prefname"},"Preferred Name:"),r.a.createElement($.a,{placement:"topRight",title:"1-60 characters"},r.a.createElement("input",{type:"text",d:"prefname",className:"userField",placeholder:"Harry",autoComplete:"given-name",onChange:function(t){return e.setPrefname(t.target.value)},required:!0}))),r.a.createElement("div",{className:"userFormGroup"},r.a.createElement("label",{htmlFor:"email"},"Username:"),r.a.createElement($.a,{placement:"topRight",title:"4-60 characters"},r.a.createElement("input",{type:"text",id:"email",className:"userField",placeholder:"harryman88",autoComplete:"username",onChange:function(t){return e.setUsername(t.target.value)},required:!0}))),r.a.createElement("div",{className:"userFormGroup"},r.a.createElement("label",{htmlFor:"pass"},"Password:"),r.a.createElement($.a,{placement:"topRight",title:"8-60 characters"},r.a.createElement("input",{type:"password",id:"pass",className:"userField",autoComplete:"new-password",onChange:function(t){return e.setPass(t.target.value)},required:!0}))),r.a.createElement("div",{className:"userFormBtnWrap"},r.a.createElement("button",{onClick:function(t){return e.btn(t)},className:"userFormBtn"},"Register"))),r.a.createElement("div",{className:"footWrapUser"},r.a.createElement("p",{className:"formSwitch",onClick:function(){return e.setForm("login")}},"Go to Login form!"),r.a.createElement(V,null)))}function X(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(l.a)(d,2),f=p[0],g=p[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),y=v[0],N=v[1],w=Object(n.useState)(""),k=Object(l.a)(w,2),S=k[0],j=k[1],O=Object(n.useState)(""),C=Object(l.a)(O,2),T=C[0],F=C[1],x=Object(n.useState)(""),P=Object(l.a)(x,2),I=P[0],W=P[1],B=Object(n.useState)(""),R=Object(l.a)(B,2),H=R[0],M=R[1],q=Object(n.useState)(""),G=Object(l.a)(q,2),A=G[0],U=G[1],D=Object(n.useState)(""),L=Object(l.a)(D,2),z=L[0],_=L[1];return r.a.createElement("div",{className:"Prefs"},r.a.createElement("div",null,r.a.createElement("div",{className:"prefsTile"},r.a.createElement("p",{className:"bubbleTitle prefsTitle",onClick:function(){return c("form1"===s?"":"form1")}},"Change Username"),r.a.createElement("form",{style:"form1"===s?{}:{display:"none"}},r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"current-username"},"Current Username:"),r.a.createElement("input",{type:"text",id:"current-username",className:"userField",placeholder:"",autoComplete:"username",onChange:function(e){return u(e.target.value)},required:!0})),r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"new-username"},"New Username:"),r.a.createElement($.a,{placement:"topRight",title:"4-60 characters"},r.a.createElement("input",{type:"text",id:"new-username",className:"userField",placeholder:"",autoComplete:"off",onChange:function(e){return U(e.target.value)},required:!0}))),r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"pass1"},"Password:"),r.a.createElement("input",{type:"password",id:"pass1",className:"userField",autoComplete:"password",onChange:function(e){return j(e.target.value)},required:!0})),r.a.createElement("div",{className:"userFormBtnWrap"},r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault(),E.a.post("https://whisperas.appspot.com/api/user/update-un",{username:m,newUsername:A,pass:S}).then((function(e){e.data.success?(h.a.success("Username successfully updated"),u(""),U(""),j(""),c("")):h.a.error(e.data.message)}))}(e)},className:"userFormBtn"},"Submit")))),r.a.createElement("div",{className:"prefsTile"},r.a.createElement("p",{className:"bubbleTitle prefsTitle",onClick:function(){return c("form2"===s?"":"form2")}},"Change Preferred Name"),r.a.createElement("form",{style:"form2"===s?{}:{display:"none"}},r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"current-username-2"},"Username:"),r.a.createElement("input",{type:"text",id:"current-username-2",className:"userField",placeholder:"",autoComplete:"username",onChange:function(e){return g(e.target.value)},required:!0})),r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"prefname"},"New Preferred Name:"),r.a.createElement($.a,{placement:"topRight",title:"1-60 characters"},r.a.createElement("input",{type:"text",id:"username",className:"userField",placeholder:"",autoComplete:"off",onChange:function(e){return _(e.target.value)},required:!0}))),r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"pass2"},"Password:"),r.a.createElement("input",{type:"password",id:"pass2",className:"userField",autoComplete:"password",onChange:function(e){return F(e.target.value)},required:!0})),r.a.createElement("div",{className:"userFormBtnWrap"},r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault(),E.a.post("https://whisperas.appspot.com/api/user/update-pn",{username:f,newPrefname:z,pass:T}).then((function(e){e.data.success?(localStorage.setItem("prefname",z),h.a.success("Preferred Name updated"),g(""),_(""),F(""),c("")):h.a.error(e.data.message)}))}(e)},className:"userFormBtn"},"Submit")))),r.a.createElement("div",{className:"prefsTile"},r.a.createElement("p",{className:"bubbleTitle prefsTitle",onClick:function(){return c("form3"===s?"":"form3")}},"Reset Password"),r.a.createElement("form",{style:"form3"===s?{}:{display:"none"}},r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"current-username-3"},"Username:"),r.a.createElement("input",{type:"text",id:"current-username-3",className:"userField",placeholder:"",autoComplete:"username",onChange:function(e){return N(e.target.value)},required:!0})),r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"pass3"},"Current Password:"),r.a.createElement("input",{type:"password",id:"pass3",className:"userField",autoComplete:"password",onChange:function(e){return W(e.target.value)},required:!0})),r.a.createElement("div",{className:"userFormGroup mini"},r.a.createElement("label",{htmlFor:"new-pass"},"New Password:"),r.a.createElement($.a,{placement:"topRight",title:"8-60 characters"},r.a.createElement("input",{type:"password",id:"new-pass",className:"userField",autoComplete:"off",onChange:function(e){return M(e.target.value)},required:!0}))),r.a.createElement("div",{className:"userFormBtnWrap"},r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault(),E.a.post("https://whisperas.appspot.com/api/user/update-pass",{username:y,newPass:H,pass:I}).then((function(e){e.data.success?(h.a.success("Password successfully updated"),N(""),M(""),W(""),c("")):h.a.error(e.data.message)}))}(e)},className:"userFormBtn"},"Submit"))))),r.a.createElement("div",{className:"userFormBtnWrap logoutWrap",style:""===s?{}:{display:"none"}},r.a.createElement("button",{onClick:function(t){return e.logout(t)},className:"userFormBtn logoutBtn"},"Logout")),r.a.createElement("div",{style:""===s?{}:{display:"none"}},r.a.createElement(V,null)))}function Z(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),o=Object(l.a)(c,2),m=o[0],u=o[1],d=Object(n.useState)(""),p=Object(l.a)(d,2),h=p[0],f=p[1],g=Object(n.useState)(""),b=Object(l.a)(g,2),v=b[0],y=b[1],N=Object(n.useState)(""),w=Object(l.a)(N,2),k=w[0],S=w[1],j=Object(n.useState)(""),O=Object(l.a)(j,2),C=O[0],T=O[1],F=Object(n.useState)(""),x=Object(l.a)(F,2),P=x[0],I=x[1],W=Object(n.useState)(null),B=Object(l.a)(W,2),R=B[0],H=B[1];Object(n.useEffect)((function(){null===localStorage.getItem("token")?s("login"):s("prefs")}),[s]);var M=function(e,t){localStorage.setItem("token",e),localStorage.setItem("prefname",t),H("/")};return R?r.a.createElement(i.a,{push:!0,to:R}):r.a.createElement("div",{className:"User mainPage"},r.a.createElement("h1",null,"login"===a?"Login":"register"===a?"Register":"Preferences"),r.a.createElement("h2",null,m),"login"===a?r.a.createElement(Q,{setUsername:f,setPass:y,btn:function(e){e.preventDefault(),h.length<4||h.length>60?u("Hint: Your username contains between 4 & 60 characters :)"):v.length<8||v.length>60?u("Hint: Your password contains between 8 & 60 characters :)"):E.a.post("https://whisperas.appspot.com/api/user/login",{username:h,pass:v}).then((function(e){e.data.success?M(e.data.token,e.data.prefname):u(e.data.message)}))},setForm:s}):"register"===a?r.a.createElement(K,{setUsername:S,setPass:T,setPrefname:I,btn:function(e){e.preventDefault(),P.length<1||P.length>60?u("Preferred Name must contain between 1 & 60 characters"):k.length<4||k.length>60?u("Username must contain between 4 & 60 characters"):C.length<8||C.length>60?u("Password must contain between 8 & 60 characters"):E.a.post("https://whisperas.appspot.com/api/user/register",{prefname:P,username:k,pass:C}).then((function(e){e.data.success?M(e.data.token,e.data.prefname):u(e.data.message)}))},setForm:s}):"prefs"===a?r.a.createElement(X,{logout:function(e){e.preventDefault(),localStorage.removeItem("token"),localStorage.removeItem("prefname"),localStorage.removeItem("entries"),H("/")}}):r.a.createElement("div",null))}function ee(){return r.a.createElement("div",{className:"NoUserLinks mainPage"},r.a.createElement("div",null,r.a.createElement("p",{id:"welcomeHead"},"Welcome to Whisperas!"),r.a.createElement("p",{id:"instructions"},"Please login or register to continue.")),r.a.createElement("div",{className:"userFormBtnWrap homeBtnWrap"},r.a.createElement("div",null,r.a.createElement(o.b,{to:"/user"},r.a.createElement("div",{className:"userFormBtn homeBtn"},"Login")))),r.a.createElement("div",null))}function te(e){return r.a.createElement("div",null,r.a.createElement(o.b,{to:e.url},r.a.createElement("div",{className:"LinkBubble"},r.a.createElement("img",{className:"bubbleIcn",src:e.icn,alt:""}),r.a.createElement("p",{className:"bubbleTitle"},e.title))))}function ae(){return r.a.createElement("div",{className:"Links"},r.a.createElement(te,{title:"History",icn:a(107),url:"/history"}),r.a.createElement(te,{title:"Trends",icn:a(108),url:"/trends"}),r.a.createElement(te,{title:"User",icn:a(109),url:"/user"}),r.a.createElement(te,{title:"Resources",icn:a(110),url:"/resources"}))}function ne(){var e=localStorage.getItem("token");return r.a.createElement("div",{className:"welcome mainPage"},r.a.createElement("h1",{id:"welcomeh1"},"Whisperas"),r.a.createElement("h2",null,"The Pancreas Whisperer"),e?r.a.createElement(ae,null):r.a.createElement(ee,null))}var re=function(){var e=Object(n.useState)(0),t=Object(l.a)(e,2),a=t[0],s=t[1];return window.matchMedia("(max-width: 768px)").matches?r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"}," ",r.a.createElement(ne,null)," "),r.a.createElement(i.b,{path:"/history"}," ",r.a.createElement(O,null)," "),r.a.createElement(i.b,{path:"/trends"}," ",r.a.createElement(J,null)," "),r.a.createElement(i.b,{path:"/entry"}," ",r.a.createElement(A,{index:a,setIndex:s})," "),r.a.createElement(i.b,{path:"/user"}," ",r.a.createElement(Z,null)," "),r.a.createElement(i.b,{path:"/resources"}," ",r.a.createElement(U,null)," ")),r.a.createElement(p,{index:a,setIndex:s}))):r.a.createElement(u,null)},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");se?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()},57:function(e,t,a){e.exports=a.p+"static/media/bad.d10d7dcb.svg"},58:function(e,t,a){e.exports=a.p+"static/media/soso.a6fbfc5a.svg"},59:function(e,t,a){e.exports=a.p+"static/media/normal.e9ffa529.svg"},60:function(e,t,a){e.exports=a.p+"static/media/good.4714f833.svg"},61:function(e,t,a){e.exports=a.p+"static/media/great.093e18af.svg"}},[[147,1,2]]]);
//# sourceMappingURL=main.8670584a.chunk.js.map